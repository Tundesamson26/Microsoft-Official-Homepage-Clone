(window.webpackJsonp=window.webpackJsonp||[]).push([[39],{"2ajD":function(e,t){e.exports=function(e){return e!==e}},"8y4a":function(e,t,s){"use strict";var r,o=s("q1tI"),a=s.n(o),i=s("8cHP"),n=s("jKhH"),p=s("qPyV"),l=s.n(p),h=s("okNM"),c=s("VqVs"),d=s("cD6e"),u=s("Brk0"),m=a.a.createElement;const f=s("X8aD"),b=new f.Renderer;b.link=function(e,t,s){var r=f.Renderer.prototype.link.call(this,e,t,s);return t&&t.includes("s Profile - Hashnode")&&e&&e.includes("https://hashnode.com")?r.replace("<a","<a class='user-mention' target='_blank' rel='noopener noreferrer'"):0===e.indexOf("#")?r.replace("<a","<a class='post-section-overview'"):r.replace("<a","<a target='_blank' rel='noopener noreferrer' ")},b.tablecell=function(e,t){var s=e.split("&lt;br&gt;-");if(1===s.length)return"<td>"+e+"</td>";0===s[0].indexOf("- ")&&(s[0]=s[0].substring(1));var r="";return s.forEach((function(e){r+="<li>"+e+"</li>"})),"<td><ul>"+r+"</ul></td>"};const g={renderer:b,gfm:!0,tables:!0,sanitize:!0,highlight:function(e,t){const r=s("rkFo");return t?r.getLanguage(t)?r.highlight(t,e,!0).value:r.highlightAuto(e,[]).value:r.highlightAuto(e).value}};let w=Object(h.b)("postStore")(r=Object(h.b)("userStore")(r=Object(h.c)(r=class extends a.a.Component{constructor(e,t){super(e,t),this.initEditorWithContent=()=>{const e=this.props.response?"":this.getContentFromLocalStorage();return e&&this.editor&&this.editor.setContent(e),e},this.getContentFromLocalStorage=()=>{let e="";try{window.localStorage&&(e=window.localStorage.getItem("post:"+this.props.postStore.post._id+":response"))}catch(t){}return e},this.hideCommentArea=e=>{e.preventDefault(),this.setState({commentAreaVisible:!1}),this.props.parentCallback&&this.props.parentCallback()},this.showCommentArea=e=>{if(e.preventDefault(),!this.props.userStore.currentUser){if(this.props.isPublicationPost)return this.props.goToPublicationLogin("comment");const e="?next="+window.location.pathname;return i.Router.pushRoute("/login"+e)}this.setState({commentAreaVisible:!0},()=>{this.initEditorWithContent(),this.editor&&this.editor.focus()})},this.submitResponse=async e=>{if(!this.props.userStore.currentUser){if(this.props.isPublicationPost)return this.props.goToPublicationLogin("comment");const e="?next="+window.location.pathname;return i.Router.pushRoute("/login"+e)}const t=this.props.postStore.post._id,s=this.editor.value.trim();if(s){if(this.setState({submitDisabled:!0}),this.props.response){await this.props.postStore.updateResponse(t,this.props.response._id,s);const e=Object.assign({},this.props.postStore.post);for(let t=0;t<e.responses.length;t++)if(e.responses[t]._id===this.props.response._id){e.responses[t].contentMarkdown=s,e.responses[t].content=f(s,g);break}this.props.postStore.post=e}else if(await this.props.postStore.submitResponse(t,s),window.localStorage&&window.localStorage.removeItem("post:"+this.props.postStore.post._id+":response"),this.props.postStore.post.isIntroduction){const e=Object.assign({},this.props.userStore.pendingTasks);e.hasIntroduced=!0,this.props.userStore.pendingTasks=e}this.setState({submitDisabled:!1}),this.props.parentCallback&&this.props.parentCallback(),this.setState({commentAreaVisible:!1}),this.editor.clearEditor()}},this.handleInput=e=>{this.setState({response:e}),window.localStorage&&!this.props.response&&window.localStorage.setItem("post:"+this.props.postStore.post._id+":response",e)},this.state={commentAreaVisible:!!e.response||e.postStore.post.responseCount<=0}}componentDidMount(){if(this.state.commentAreaVisible){this.initEditorWithContent()&&this.editor&&this.editor.focus()}}render(){const e=this.props.userStore.currentUser,t=this.props.postStore.post;let s=[];return t.author&&!t.author.isDeactivated&&s.push({name:t.author.name,username:t.author.username,photo:t.author.photo}),(t.responses||[]).map((function(e){e.author.isDeactivated||e.author.name===(t.author&&t.author.name)||s.push({name:e.author.name,username:e.author.username,photo:e.author.photo})})),s=l()(s,"username"),e&&(s=s.filter((function(t){return t.username!==e.username}))),s=s.slice(0,5),m("div",{id:"comments",className:""},!this.props.response&&t.responseCount>0||!e?m("div",{className:"mx-2 p-4 bg-white rounded-lg border mb-6 flex flex-row flex-wrap justify-between items-center dark:bg-transparent dark:border-brand-grey-800"},m("div",{className:"flex flex-row items-center dark:text-gray-200"},t.responseCount>0?m("h3",{className:"font-bold mr-4"},"Comments (",(t.responseCount||0)+(t.replyCount||0),")"):m("h3",null,"No Comments Yet"),t.responseCount>1&&m(d.a,{elements:[{key:"popular",name:"Popular"},{key:"recent",name:"Recent"}],onElementSelect:this.props.onFilterChange})),m("div",{className:"w-full md:w-auto flex flex-row items-start mt-3 md:mt-0"},m("a",{href:"#",onClick:this.showCommentArea,className:"button-primary flex flex-row items-center"},m(u.a,{className:"w-5 h-5 fill-current mr-2"}),m("span",null,"Add a comment")))):null,"question"===t.type&&m("meta",{itemProp:"answerCount",content:t.responseCount}),this.state.commentAreaVisible&&e&&m("div",{className:"mx-2 px-4 md:px-8 py-6 bg-white border rounded-lg mb-6 dark:bg-brand-grey-900 dark:border-brand-grey-800"},m("div",{className:"dark:text-gray-300"},m("div",{className:"pb-4"},m("div",{className:"flex flex-row items-center"},m("div",{className:"w-10 h-10 mr-2 rounded-full overflow-hidden"},m(c.a,{className:"comment-author-photo",user:e,hoverDisabled:this.props.isPublicationPost})),m("a",{className:"font-semibold text-lg text-brand-grey-800 dark:text-brand-grey-300",href:`/@${e.username}`},e.name))),m(n.a,{getRef:e=>{this.editor=e},name:"editor",onChangeHandler:this.handleInput,onSubmitHandler:this.submitResponse,initialValue:this.props.response?this.props.response.contentMarkdown:"",placeholder:"Start typing...",defaultMentionSuggestions:s,isPublicationPost:this.props.isPublicationPost}),m("div",{className:"flex flex-row items-center justify-end border-t dark:border-brand-grey-800 pt-4"},t.responseCount>0&&m("button",{onClick:this.hideCommentArea,className:"button-transparent mr-5"},"Cancel"),m("button",{onClick:this.submitResponse,disabled:this.state.submitDisabled,className:"button-primary "+(this.state.submitDisabled?"opacity-50":"")},this.props.response?"Save":"Submit")))))}})||r)||r)||r;t.a=w},BSJM:function(e,t,s){"use strict";s.d(t,"a",(function(){return i}));var r=s("q1tI"),o=s.n(r),a=o.a.createElement;class i extends o.a.Component{render(){return a("svg",{className:this.props.className,viewBox:"0 0 496 512"},a("path",{d:"M248 8C111 8 0 119 0 256s111 248 248 248 248-111 248-248S385 8 248 8zm0 464c-119.1 0-216-96.9-216-216S128.9 40 248 40s216 96.9 216 216-96.9 216-216 216zm90.2-146.2C315.8 352.6 282.9 368 248 368s-67.8-15.4-90.2-42.2c-5.7-6.8-15.8-7.7-22.5-2-6.8 5.7-7.7 15.7-2 22.5C161.7 380.4 203.6 400 248 400s86.3-19.6 114.8-53.8c5.7-6.8 4.8-16.9-2-22.5-6.8-5.6-16.9-4.7-22.6 2.1zM168 240c17.7 0 32-14.3 32-32s-14.3-32-32-32-32 14.3-32 32 14.3 32 32 32zm160 0c17.7 0 32-14.3 32-32s-14.3-32-32-32-32 14.3-32 32 14.3 32 32 32z"}))}}},ByAy:function(e,t,s){"use strict";s.d(t,"a",(function(){return te}));var r,o=s("q1tI"),a=s.n(o),i=s("8cHP"),n=s("Wgwc"),p=s.n(n),l=s("4kg8"),h=s.n(l),c=s("mlqF"),d=s("VqVs"),u=s("Qi1R"),m=s("okNM"),f=s("BSJM"),b=a.a.createElement;var g,w=Object(m.b)("postStore")(r=Object(m.b)("userStore")(r=Object(m.b)("themeStore")(r=Object(m.c)(r=class extends a.a.Component{constructor(e,t){super(e,t),this.assignOrRemoveReaction=e=>{e.preventDefault();const t=e.currentTarget.getAttribute("data-reaction-id");if(!this.props.userStore.currentUser){if(this.props.isPublicationPost)return this.props.goToPublicationLogin("react");const e="?next="+window.location.pathname;return i.Router.pushRoute("/login"+e)}let s=Object.assign({},this.props.postStore.post);for(var r=0;r<s.responses.length;r++)if(s.responses[r]._id===this.props.response._id){const e=s.responses[r],o=(e.reactionsByCurrentUser?e.reactionsByCurrentUser.map(e=>e.toString()):[]).indexOf(t);if(s.responses[r].reactionToCountMap||(s.responses[r].reactionToCountMap={}),-1===o)s.responses[r].reactionsByCurrentUser.unshift(t),s.responses[r].totalReactions=s.responses[r].totalReactions?s.responses[r].totalReactions+1:1,s.responses[r].reactionToCountMap[`reaction_${t}`]=s.responses[r].reactionToCountMap[`reaction_${t}`]?s.responses[r].reactionToCountMap[`reaction_${t}`]+1:1,s.responses[r].reactions&&s.responses[r].reactions.length>0?-1===s.responses[r].reactions.map(e=>e._id).indexOf(t)&&s.responses[r].reactions.push(t):s.responses[r].reactions=[t];else{s.responses[r].reactionsByCurrentUser.splice(o,1),s.responses[r].totalReactions--,s.responses[r].reactionToCountMap[`reaction_${t}`]--;let e=-1;for(let o=0;o<s.responses[r].reactions.length;o++)if(s.responses[r].reactions[o]===t){e=r;break}-1!==e&&s.responses[r].reactions.splice(e,1)}this.props.postStore.post=s;break}this.props.postStore.reactToResponse(s._id,this.props.response._id,t)},this.handleReactionClick=e=>{if(!this.props.userStore.currentUser){const e="?next="+window.location.pathname;i.Router.pushRoute("/login"+e)}},this.showAvailableReactions=()=>{this.setState({showAvailableReactions:!0}),document.addEventListener("click",this.hideAvailableReactions),document.addEventListener("touchend",this.hideAvailableReactions)},this.hideAvailableReactions=e=>{this.reactionsTray&&!this.reactionsTray.contains(e.target)&&(e.preventDefault(),this.setState({showAvailableReactions:!1}),document.removeEventListener("click",this.hideAvailableReactions),document.removeEventListener("touchend",this.hideAvailableReactions))},this.onMouseOut=e=>{this.setState({currentReaction:""})},this.onMouseOver=e=>{const t=e.currentTarget.getAttribute("data-reaction-name");this.setState({currentReaction:t})},this.state={defaultReaction:u.g[0],reactions:u.g}}render(){const e=this.props.response,t=e.reactionsByCurrentUser?e.reactionsByCurrentUser.map(e=>e.toString()):[],s=this.state.reactions.map(e=>b("div",{className:"w-16"},b("button",{title:e.name,onMouseOver:this.onMouseOver,onMouseOut:this.onMouseOut,className:`button-transparent ${-1!==t.indexOf(e._id)?"active border border-brand-blue":""}`,onClick:this.assignOrRemoveReaction,"data-reaction-name":e.name,"data-reaction-name":e.name,"data-reaction-id":e._id,key:e._id},b("div",{className:"w-6"},b("img",{src:e.image,className:"block w-full"})))));let r=[];this.state.reactions.forEach(t=>{const s=e.reactionToCountMap[`reaction_${t._id.toString()}`];s>0&&r.push({reaction:t,count:s})}),r=r.map(t=>b("div",{className:"mb-2 mr-2",key:t.reaction._id},b("button",{title:t.reaction.name,onClick:this.assignOrRemoveReaction,"data-reaction-id":t.reaction._id,className:`button-transparent flex flex-row items-center w-full justify-center tooltip-handle ${-1!==e.reactionsByCurrentUser.indexOf(t.reaction._id)?"active border border-brand-blue":""}`,"data-title":t.reaction.name},b("span",{className:"w-5 mr-1"},b("img",{src:t.reaction.image,className:"block w-full"})),b("span",{className:"font-semibold"},t.count))));const o=Object.assign({},e.reactionToCountMap);for(let i in o)o[i]||delete o[i];const a=Object.keys(o).filter(e=>"any"!==e);return b("div",{itemProp:"interactionStatistic",itemScope:!0,itemType:"https://schema.org/InteractionCounter",className:"flex flex-row flex-wrap items-start w-full mr-4 md:w-auto md:flex-1"},b("meta",{itemProp:"interactionType",content:"LikeAction"}),b("meta",{itemProp:"userInteractionCount",content:this.props.response.totalReactions}),a.length<10&&b("div",{className:"relative mb-2 mr-2"},b("button",{onClick:this.showAvailableReactions,className:"flex flex-row items-center justify-center w-full h-full button-transparent"},b(f.a,{className:"flex-shrink-0 w-6 opacity-75 fill-current"}),0===a.length&&b("span",{className:"ml-2"},"Like")),this.state.showAvailableReactions&&b("div",{className:"absolute left-0 z-20 px-2 py-4 bg-white border rounded-lg shadow-lg top-100 w-72 dark:bg-brand-dark-grey-900 dark:border-brand-grey-800",ref:e=>{this.reactionsTray=e}},b("h4",{className:"mb-2 text-sm leading-tight text-gray-700 dark:text-brand-grey-400"},"Like this comment with multiple emojis or just one: "),b("div",{className:"flex flex-row flex-wrap justify-center"},s))),r.length>0&&r)}})||r)||r)||r)||r,v=a.a.createElement;var x,y=Object(m.b)("postStore")(g=Object(m.b)("userStore")(g=Object(m.b)("themeStore")(g=Object(m.c)(g=class extends a.a.Component{constructor(e,t){super(e,t),this.assignOrRemoveReaction=e=>{e.preventDefault();const t=e.currentTarget.getAttribute("data-reaction-id");if(!this.props.userStore.currentUser){const e="?next="+window.location.pathname;return i.Router.pushRoute("/login"+e)}let s=Object.assign({},this.props.postStore.post);for(let r=0;r<s.responses.length;r++)for(let e=0;e<s.responses[r].replies.length;e++)if(s.responses[r].replies[e]._id===this.props.reply._id){const o=s.responses[r].replies[e],a=(o.reactionsByCurrentUser?o.reactionsByCurrentUser.map(e=>e.toString()):[]).indexOf(t);if(s.responses[r].replies[e].reactionToCountMap||(s.responses[r].replies[e].reactionToCountMap={}),-1===a)s.responses[r].replies[e].reactionsByCurrentUser.unshift(t),s.responses[r].replies[e].totalReactions=s.responses[r].replies[e].totalReactions?s.responses[r].replies[e].totalReactions+1:1,s.responses[r].replies[e].reactionToCountMap[`reaction_${t}`]=s.responses[r].replies[e].reactionToCountMap[`reaction_${t}`]?s.responses[r].replies[e].reactionToCountMap[`reaction_${t}`]+1:1,s.responses[r].replies[e].reactions&&s.responses[r].replies[e].reactions.length>0?-1===s.responses[r].replies[e].reactions.map(e=>e._id).indexOf(t)&&s.responses[r].replies[e].reactions.push(t):s.responses[r].replies[e].reactions=[t];else{s.responses[r].replies[e].reactionsByCurrentUser.splice(a,1),s.responses[r].replies[e].totalReactions--,s.responses[r].replies[e].reactionToCountMap[`reaction_${t}`]--;let o=-1;for(let a=0;a<s.responses[r].replies[e].reactions.length;a++)if(s.responses[r].replies[e].reactions[a]===t){o=r;break}-1!==o&&s.responses[r].replies[e].reactions.splice(o,1)}this.props.postStore.post=s;break}this.props.postStore.reactToReply(s._id,this.props.response._id,this.props.reply._id,t)},this.handleReactionClick=e=>{if(!this.props.userStore.currentUser){const e="?next="+window.location.pathname;i.Router.pushRoute("/login"+e)}},this.showAvailableReactions=()=>{this.setState({showAvailableReactions:!0}),document.addEventListener("click",this.hideAvailableReactions),document.addEventListener("touchend",this.hideAvailableReactions)},this.hideAvailableReactions=e=>{this.reactionsTray&&!this.reactionsTray.contains(e.target)&&(e.preventDefault(),this.setState({showAvailableReactions:!1}),document.removeEventListener("click",this.hideAvailableReactions),document.removeEventListener("touchend",this.hideAvailableReactions))},this.onMouseOut=e=>{this.setState({currentReaction:""})},this.onMouseOver=e=>{const t=e.currentTarget.getAttribute("data-reaction-name");this.setState({currentReaction:t})},this.state={defaultReaction:u.g[0],reactions:u.g}}render(){const e=this.props.reply,t=e.reactionsByCurrentUser?e.reactionsByCurrentUser.map(e=>e.toString()):[],s=this.state.reactions.map(e=>v("div",{className:"w-16"},v("button",{title:e.name,onMouseOver:this.onMouseOver,onMouseOut:this.onMouseOut,className:`button-transparent ${-1!==t.indexOf(e._id)?"active border border-brand-blue":""}`,onClick:this.assignOrRemoveReaction,"data-reaction-name":e.name,"data-reaction-id":e._id,key:e._id},v("div",{className:"w-6"},v("img",{src:e.image,className:"block w-full"})))));let r=[];this.state.reactions.forEach(t=>{const s=e.reactionToCountMap[`reaction_${t._id.toString()}`];s>0&&r.push({reaction:t,count:s})}),r=r.map(e=>v("div",{className:"mb-2 mr-2"},v("button",{title:e.reaction.name,onClick:this.assignOrRemoveReaction,"data-reaction-id":e.reaction._id,className:`button-transparent flex flex-row items-center w-full justify-center tooltip-handle ${-1!==t.indexOf(e.reaction._id)?"active border border-brand-blue":""}`,"data-title":e.reaction.name,key:e.reaction._id},v("span",{className:"w-4 mr-1"},v("img",{src:e.reaction.image,className:"block w-full"})),v("span",{className:"font-semibold"},e.count))));const o=Object.assign({},e.reactionToCountMap);for(let i in o)o[i]||delete o[i];const a=Object.keys(o).filter(e=>"any"!==e);return v("div",{itemProp:"interactionStatistic",itemScope:!0,itemType:"https://schema.org/InteractionCounter",className:"flex flex-row flex-wrap items-start w-full mr-4 md:w-auto md:flex-1"},v("meta",{itemProp:"interactionType",content:"LikeAction"}),v("meta",{itemProp:"userInteractionCount",content:this.props.reply.totalReactions}),a.length<10&&v("div",{className:"relative mb-2 mr-2"},v("button",{onClick:this.showAvailableReactions,className:"flex flex-row items-center justify-center w-full h-full button-transparent"},v(f.a,{className:"flex-shrink-0 w-6 opacity-75 fill-current"}),0===a.length&&v("span",{className:"ml-2"},"Like")),this.state.showAvailableReactions&&v("div",{className:"absolute left-0 z-20 px-2 py-4 bg-white border rounded-lg shadow-lg top-100 w-72 dark:bg-brand-dark-grey-900 dark:border-brand-grey-800",ref:e=>{this.reactionsTray=e}},v("h4",{className:"mb-2 text-sm leading-tight text-gray-700 dark:text-brand-grey-400"},"Like this reply with multiple emojis or just one:"),v("div",{className:"flex flex-row flex-wrap justify-center"},s))),r.length>0&&r)}})||g)||g)||g)||g,S=s("u89N"),k=s("QgiU"),C=s.n(k),N=s("I631"),R=s.n(N),P=s("vSk/"),O=s("3nLt"),_=s("RQTc"),D=s("jKhH"),A=s("qPyV"),M=s.n(A),E=a.a.createElement;const T=s("X8aD"),j=new T.Renderer;j.link=function(e,t,s){var r=T.Renderer.prototype.link.call(this,e,t,s);return t&&t.includes("s Profile - Hashnode")&&e&&e.includes("https://hashnode.com")?r.replace("<a","<a class='user-mention' target='_blank' rel='noopener noreferrer'"):0===e.indexOf("#")?r.replace("<a","<a class='post-section-overview'"):r.replace("<a","<a target='_blank' rel='noopener noreferrer' ")},j.tablecell=function(e,t){var s=e.split("&lt;br&gt;-");if(1===s.length)return"<td>"+e+"</td>";0===s[0].indexOf("- ")&&(s[0]=s[0].substring(1));var r="";return s.forEach((function(e){r+="<li>"+e+"</li>"})),"<td><ul>"+r+"</ul></td>"};const I={renderer:j,gfm:!0,tables:!0,sanitize:!0,highlight:function(e,t){const r=s("rkFo");return t?r.getLanguage(t)?r.highlight(t,e,!0).value:r.highlightAuto(e,[]).value:r.highlightAuto(e).value}};let L=Object(m.b)("userStore")(x=Object(m.b)("postStore")(x=Object(m.c)(x=class extends a.a.Component{constructor(e,t){super(e,t),this.handleReply=e=>{this.setState({replyContent:e}),window.localStorage&&!this.props.reply&&window.localStorage.setItem(`post:${this.props.postStore.post._id}:${this.props.response._id}:reply`,e)},this.getContentFromLocalStorage=()=>{let e="";try{window.localStorage&&(e=window.localStorage.getItem(`post:${this.props.postStore.post._id}:${this.props.response._id}:reply`))}catch(t){}return e},this.focus=()=>{this.editor.focus()},this.handleSubmit=async()=>{if(!this.props.userStore.currentUser){if(this.props.isPublicationPost)return this.props.goToPublicationLogin("reply");const e="?next="+window.location.pathname;return i.Router.pushRoute("/login"+e)}if(this.editor.value.trim()){if(this.setState({submitDisabled:!0}),this.props.reply){await this.props.postStore.updateReply(this.props.postStore.post._id,this.props.response._id,this.props.reply._id,this.editor.value);const t=Object.assign({},this.props.postStore.post);for(let s=0;s<t.responses.length;s++)if(t.responses[s]._id===this.props.response._id){for(var e=0;e<t.responses[s].replies.length;e++)if(t.responses[s].replies[e]._id===this.props.reply._id){t.responses[s].replies[e].contentMarkdown=this.editor.value,t.responses[s].replies[e].content=T(this.editor.value,I);break}break}this.props.postStore.post=t}else{const e=await this.props.postStore.submitReply(this.props.postStore.post._id,this.props.response._id,this.editor.value),t=Object.assign({},this.props.postStore.post);for(let s=0;s<t.responses.length;s++)if(t.responses[s]._id===this.props.response._id){t.responses[s].replies.push(e);break}this.props.postStore.post=t,e&&window.localStorage&&window.localStorage.removeItem(`post:${this.props.postStore.post._id}:${this.props.response._id}:reply`)}this.setState({submitDisabled:!1}),this.props.parentCallback&&this.props.parentCallback(),this.editor.clearEditor()}},this.state={initialValue:this.props.reply?this.props.reply.contentMarkdown:this.props.initialValue||""}}componentDidMount(){if(this.props.autofocus&&this.focus(),!this.props.reply){const e=this.getContentFromLocalStorage();e&&this.editor.setContent(e)}}render(){const e=this.props.userStore.currentUser;let t=[];return this.props.response.author&&this.props.response.author.name&&!this.props.response.author.isDeactivated&&(t.push({name:this.props.response.author.name,username:this.props.response.author.username,photo:this.props.response.author.photo}),this.props.response.replies.forEach(e=>{e.author.isDeactivated||t.push({name:e.author.name,username:e.author.username,photo:e.author.photo})}),t=M()(t,"username"),e&&(t=t.filter(t=>t.username!==e.username))),E("div",{className:"p-4 border-l border-t border-b dark:border-brand-grey-800"},E("div",{className:""},E("div",{className:"pb-2 dark:text-gray-300"},E("div",{className:"flex flex-row items-center"},E("div",{className:"w-10 h-10 mr-4 rounded-full overflow-hidden"},E(d.a,{user:e,className:"comment-author-photo"})),E("a",{className:"font-bold",href:`/@${e.username}`},e.name))),E("div",{className:"ml-0 lg:ml-12"},E(D.a,{name:"reply-editor",getRef:e=>{this.editor=e},onChangeHandler:this.handleReply,initialValue:this.state.initialValue,onSubmitHandler:this.handleSubmit,placeholder:"Reply to this\u2026",disableToolbar:!0,disablePreview:!0,defaultMentionSuggestions:t})),E("div",{className:"flex flex-row justify-end items-center"},E("button",{className:"button-transparent mr-5",onClick:this.props.parentCallback},"Cancel"),E("button",{onClick:this.handleSubmit,disabled:this.state.submitDisabled,className:"button-primary"},this.props.reply?"Save":"Submit"))))}})||x)||x)||x;var V,U=a.a.createElement;const B=s("X8aD"),H=new B.Renderer;H.link=function(e,t,s){var r=B.Renderer.prototype.link.call(this,e,t,s);return t&&t.includes("s Profile - Hashnode")&&e&&e.includes("https://hashnode.com")?r.replace("<a","<a class='user-mention' target='_blank' rel='noopener noreferrer'"):0===e.indexOf("#")?r.replace("<a","<a class='post-section-overview'"):r.replace("<a","<a target='_blank' rel='noopener noreferrer' ")},H.tablecell=function(e,t){var s=e.split("&lt;br&gt;-");if(1===s.length)return"<td>"+e+"</td>";0===s[0].indexOf("- ")&&(s[0]=s[0].substring(1));var r="";return s.forEach((function(e){r+="<li>"+e+"</li>"})),"<td><ul>"+r+"</ul></td>"};const $={renderer:H,gfm:!0,tables:!0,sanitize:!0,highlight:function(e,t){const r=s("rkFo");return t?r.getLanguage(t)?r.highlight(t,e,!0).value:r.highlightAuto(e,[]).value:r.highlightAuto(e).value}};let q=Object(m.b)("userStore")(V=Object(m.b)("postStore")(V=Object(m.c)(V=class extends a.a.Component{constructor(e,t){super(e,t),this.handleReply=e=>{this.setState({replyContent:e})},this.focus=()=>{this.editor.focus()},this.handleSubmit=async()=>{if(!this.props.userStore.currentUser){if(this.props.isPublicationPost)return this.props.goToPublicationLogin("reply");const e="?next="+window.location.pathname;return i.Router.pushRoute("/login"+e)}if(this.editor.value.trim()){if(this.setState({submitDisabled:!0}),this.props.reply){await this.props.postStore.updateDraftReply(this.props.draftId,this.props.response._id,this.props.reply._id,this.editor.value);this.setState({submitDisabled:!1}),this.props.parentCallback&&this.props.parentCallback(),this.editor.clearEditor();const t=this.props.postStore.draftResponses.slice();for(let s=0;s<t.length;s++)if(t[s]._id===this.props.response._id){for(var e=0;e<t[s].replies.length;e++)if(t[s].replies[e]._id===this.props.reply._id){t[s].replies[e].contentMarkdown=this.editor.value,t[s].replies[e].content=B(this.editor.value,$);break}break}return this.props.postStore.draftResponses=t}{const e=await this.props.postStore.submitDraftReply(this.props.draftId,this.props.response._id,this.editor.value);this.setState({submitDisabled:!1}),this.props.parentCallback&&this.props.parentCallback(),this.editor.clearEditor();const t=this.props.postStore.draftResponses.slice();for(let s=0;s<t.length;s++)if(t[s]._id===this.props.response._id){t[s].replies.push(e);break}this.props.postStore.draftResponses=t}}},this.state={initialValue:this.props.reply?this.props.reply.contentMarkdown:this.props.initialValue||""}}componentDidMount(){this.props.autofocus&&this.focus()}render(){const e=this.props.userStore.currentUser;let t=[];return this.props.response.author&&this.props.response.author.name&&!this.props.response.author.isDeactivated&&(t.push({name:this.props.response.author.name,username:this.props.response.author.username,photo:this.props.response.author.photo}),this.props.response.replies.forEach(e=>{e.author.isDeactivated||t.push({name:e.author.name,username:e.author.username,photo:e.author.photo})}),t=M()(t,"username"),e&&(t=t.filter(t=>t.username!==e.username))),U("div",{className:"p-4 border-l border-t border-b dark:border-brand-grey-800"},U("div",{className:""},U("div",{className:"pb-2 dark:text-gray-300"},U("div",{className:"flex flex-row items-center"},U("div",{className:"w-10 h-10 mr-4 rounded-full overflow-hidden"},U(d.a,{user:e,className:"comment-author-photo"})),U("a",{className:"font-bold",href:`/@${e.username}`},e.name))),U("div",{className:"ml-0 lg:ml-12"},U(D.a,{name:"reply-editor",getRef:e=>{this.editor=e},onChangeHandler:this.handleReply,initialValue:this.state.initialValue,onSubmitHandler:this.handleSubmit,placeholder:"Reply to this\u2026",disableToolbar:!0,disablePreview:!0,defaultMentionSuggestions:t})),U("div",{className:"flex flex-row justify-end items-center"},U("button",{className:"button-transparent mr-5",onClick:this.props.parentCallback},"Cancel"),U("button",{onClick:this.handleSubmit,disabled:this.state.submitDisabled,className:"button-primary"},this.props.reply?"Save":"Submit"))))}})||V)||V)||V;var z,F=s("PzbU"),Y=a.a.createElement;p.a.extend(C.a),p.a.extend(R.a);let W=Object(m.b)("postStore")(z=Object(m.b)("userStore")(z=Object(m.c)(z=class extends a.a.Component{constructor(e,t){super(e,t),this.handleEditReply=()=>{this.setState({editMode:!0,extraControls:!1})},this.resetEditMode=()=>{this.setState({editMode:!1})},this.loadUserProfile=e=>{e.preventDefault(),i.Router.push("/@"+this.props.reply.author.username)},this.noop=e=>{e.preventDefault()},this.showExtraOptions=(e,t)=>{e.preventDefault(),this.setState({extraOption:t})},this.hideExtraOptions=e=>{e.preventDefault(),this.setState({extraOption:""})},this.showReplyArea=e=>{if(e.preventDefault(),!this.props.userStore.currentUser){if(this.props.isPublicationPost)return this.props.goToPublicationLogin("reply");const e="?next="+window.location.pathname;return i.Router.pushRoute("/login"+e)}this.props.showReplyArea(e,this.props.reply.author)},this.state={}}render(){const{response:e,reply:t}=this.props,s=this.props.postStore.post,r=this.props.userStore.currentUser,o=t.author.socialMedia.twitter||t.author.socialMedia.github,a=h.a.link(t.content,{twitter:!0,truncate:45,className:"autolinkedURL",replaceFn:function(e,t){switch(t.getType()){case"twitter":var s=t.getTwitterHandle();return'<a href="https://hashnode.com/@'+s+'" class="user-mention" target="_blank" rel="noopener noreferrer">@'+s+"</a>"}}}),i=Object(u.b)(t.dateAdded);return Y("div",{className:"w-full"},this.state.editMode?this.props.draftId?Y(q,{response:e,draftId:this.props.draftId,reply:t,parentCallback:this.resetEditMode}):Y(L,{response:e,reply:t,parentCallback:this.resetEditMode}):Y("div",{itemProp:"comment",itemScope:!0,itemType:"https://schema.org/Comment",className:"flex flex-row pt-6 pb-4 pl-2 border-t-2 md:pl-4 dark:border-brand-grey-800",id:`${t.stamp}`},Y("div",{className:"flex-shrink-0 w-8 h-8 mr-2 rounded-full md:w-10 md:h-10 md:mr-4"},Y(d.a,{width:"160",height:"160",user:t.author,className:"prof-pic",hoverDisabled:this.props.isPublicationPost})),Y("div",{className:"flex-1 min-w-0"},Y("div",{className:"flex flex-col"},Y("div",{className:"flex flex-row items-center text-brand-grey-900 dark:text-gray-300",itemProp:"author",itemScope:!0,itemType:"https://schema.org/Person"},Y("div",{className:"flex flex-row items-center mr-4"},Y("p",{className:"mr-2 text-base font-bold"},Y("a",{itemProp:"sameAs",href:t.author&&!t.author.isDeactivated?`${this.props.isPublicationPost?"https://hashnode.com":""}/@`+t.author.username:"#",onClick:t.author&&!t.author.isDeactivated?this.props.isPublicationPost?void 0:this.loadUserProfile:this.noop},Y("span",{itemProp:"name"},t.author.name))),o&&Y("div",{className:"flex flex-row items-center text-brand-grey-700"},t.author.socialMedia.twitter&&Y("a",{href:t.author.socialMedia.twitter,target:"_Blank",itemProp:"sameAs",rel:"noopener nofollow noreferrer",className:"mr-2"},Y(P.a,{className:"w-4 h-4 fill-current"})),t.author.socialMedia.github&&Y("a",{href:t.author.socialMedia.github,target:"_Blank",itemProp:"sameAs",rel:"noopener nofollow noreferrer"},Y(O.a,{className:"w-4 h-4 fill-current"})))),Y("p",{className:"font-medium text-brand-grey-700"},Y("a",{href:`#${t.stamp}`,title:p()(t.dateAdded).format("MMM D, YYYY HH:mm"),className:"date-time"},i)))),Y("meta",{itemProp:"dateCreated datePublished",content:t.dateAdded}),Y("div",{itemProp:"text",className:"my-5 prose break-words dark:prose-dark",dangerouslySetInnerHTML:{__html:a}}),Y("div",{className:"flex flex-row flex-wrap items-start justify-between"},!this.props.draftId&&Y(y,{response:e,reply:t}),Y("div",{className:"flex flex-row items-center justify-end w-full text-base text-gray-700 md:w-auto md:justify-start dark:text-gray-400"},Y("a",{href:"#",onClick:this.showReplyArea,className:"flex flex-row items-center mr-5 button-transparent small"},Y(F.a,{className:"w-5 h-5 mr-2 fill-current"}),Y("span",{className:"button-text"},"Reply")),r&&Y(_.a,{context:"reply",reply:t,response:e,draftId:this.props.draftId,showExtraOptions:this.showExtraOptions,handleEdit:this.handleEditReply}))),"report"===this.state.extraOption&&Y(S.a,{hideExtraOptions:this.hideExtraOptions,post:s,response:e,reply:t}))))}})||z)||z)||z;var X,J=a.a.createElement;let Q=Object(m.b)("userStore")(X=Object(m.b)("postStore")(X=Object(m.c)(X=class extends a.a.Component{constructor(e,t){super(e,t),this.toggleBadgesTray=e=>{if(e&&e.preventDefault(),!this.props.userStore.currentUser){const e="?next="+window.location.pathname;return i.Router.pushRoute("/login"+e)}this.props.toggleBadgesTray()},this.addReply=e=>(e.preventDefault(),this.props.userStore.currentUser?"feed"===this.props.context?i.Router.pushRoute("/post/"+this.props.post.slug+"-"+this.props.post.cuid+"#"+this.props.response.stamp):void this.setState({showReplyEditor:!0}):this.props.isPublicationPost?this.props.goToPublicationLogin("reply"):i.Router.pushRoute("/login?next="+window.location.path)),this.saveResponse=e=>{if(e.preventDefault(),!this.props.userStore.currentUser)return this.props.isPublicationPost?this.props.goToPublicationLogin("comment"):i.Router.pushRoute("/login?next="+window.location.pathname);const t="feed"===this.props.context?this.props.postStore.posts.filter(e=>e._id===this.props.post._id)[0]:Object.assign({},this.props.postStore.post),s=this.props.response;for(let r=0;r<t.responses.length;r++)if(t.responses[r]._id===s._id){const e=t.responses[r].bookmarkedIn.indexOf("SAVED");-1===e?t.responses[r].bookmarkedIn.push("SAVED"):t.responses[r].bookmarkedIn.splice(e,1);break}if("feed"===this.props.context){const e=this.props.postStore.posts.slice(0);for(let s=0;s<e.length;s++)if(e[s]._id===t._id){e[s]=t;break}this.props.postStore.posts=e}else this.props.postStore.post=t;this.props.postStore.savePost(t._id,s._id)},this.showAllReplies=e=>{e.preventDefault(),this.setState({repliesToShow:this.props.response.replies.length,hideShowAllBox:!0})},this.showReplyArea=(e,t)=>{if(e.preventDefault(),!this.props.userStore.currentUser){if(this.props.isPublicationPost)return this.props.goToPublicationLogin("reply");const e="?next="+window.location.pathname;return i.Router.pushRoute("/login"+e)}this.setState({replyAreaVisible:!0,replyInitialValue:t?`@[${t.name}](@${t.username}) `:""})},this.hideReplyArea=()=>{this.setState({replyAreaVisible:!1})},this.showExtraOptions=(e,t)=>{e.preventDefault(),this.setState({extraOption:t})},this.hideExtraOptions=e=>{e.preventDefault(),this.setState({extraOption:""})},this.state={repliesToShow:2,hideShowAllBox:!1}}render(){const{response:e}=this.props,t=this.props.userStore.currentUser,s=this.props.post,r=e.replies.slice(-1*this.state.repliesToShow).map(t=>J(W,{showReplyArea:this.showReplyArea,draftId:this.props.draftId,isPublicationPost:this.props.isPublicationPost,goToPublicationLogin:this.props.goToPublicationLogin,key:t._id,response:e,reply:t}));return J("div",{className:"w-full"},J("div",{className:`flex flex-row flex-wrap items-start justify-between relative z-50 ${this.props.draftId?"mb-5":""}`},!this.props.draftId&&J(w,{post:this.props.post,response:e,isPublicationPost:this.props.isPublicationPost,goToPublicationLogin:this.props.goToPublicationLogin}),J("div",{className:"flex flex-row items-center justify-end w-full mt-2 text-base text-gray-700 md:mt-0 md:w-auto md:justify-start dark:text-gray-400"},J("a",{href:"#",className:"flex flex-row items-center mr-4 button-transparent small",onClick:this.showReplyArea},J(F.a,{className:"w-5 h-5 mr-2 fill-current"}),J("span",{className:"button-text"},"Reply")),t&&J(_.a,{context:"response",handleEdit:this.props.handleEdit,draftId:this.props.draftId,response:e,showExtraOptions:this.showExtraOptions}))),"report"===this.state.extraOption&&J(S.a,{hideExtraOptions:this.hideExtraOptions,post:s,response:e}),e.replies.length>0&&J("div",{className:"w-full min-w-0 mt-6"},e.replies.length>2&&!this.state.hideShowAllBox&&J("a",{href:"#",onClick:this.showAllReplies,className:"flex flex-row items-center justify-center p-2 font-medium text-gray-700 border-t-2 text-accent-blue-A700 dark:border-brand-grey-800"},J("span",null,"Show +",e.replies.length-2," replies")),r),this.state.replyAreaVisible&&(this.props.draftId?J(q,{autofocus:!0,initialValue:this.state.replyInitialValue,response:e,draftId:this.props.draftId,parentCallback:this.hideReplyArea}):J(L,{autofocus:!0,initialValue:this.state.replyInitialValue,response:e,parentCallback:this.hideReplyArea})))}})||X)||X)||X;var G,K=s("8y4a"),Z=s("JeLk"),ee=a.a.createElement;p.a.extend(C.a),p.a.extend(R.a);let te=Object(m.b)("postStore")(G=Object(m.b)("userStore")(G=class extends a.a.Component{constructor(e,t){super(e,t),this.handleEdit=()=>{this.setState({editMode:!0})},this.resetEditMode=()=>{this.setState({editMode:!1})},this.handleDelete=async e=>{return e.preventDefault(),!!window.confirm("Are you sure you want to delete this comment?")&&(await this.props.postStore.deleteResponse(this.props.postStore.post._id,this.props.response._id),window.location.reload())},this.handleCollapse=async e=>{return e.preventDefault(),!!window.confirm("Are you sure you want to collapse this comment?")&&(await this.props.postStore.collapseResponse(this.props.postStore.post._id,this.props.response._id),window.location.reload())},this.toggleBadgesTray=e=>{if(e&&e.preventDefault(),!this.props.userStore.currentUser){const e="?next="+window.location.pathname;return i.Router.pushRoute("/login"+e)}this.props.response.author._id!==this.props.userStore.currentUser._id&&this.setState({openBadgesTray:!this.state.openBadgesTray})},this.showExtraControls=(e,t)=>{e.preventDefault(),"feed"!==this.props.context&&this.setState({extraControlsShown:!0,currentlyVisibleExtraControl:t})},this.hideExtraControls=e=>{e.preventDefault(),this.setState({extraControlsShown:!1,currentlyVisibleExtraControl:null})},this.loadPost=()=>{"feed"===this.props.context&&i.Router.pushRoute("/post/"+this.props.post.slug+"-"+this.props.post.cuid+"#"+this.props.response.stamp)},this.loadProfile=e=>{e.preventDefault();const t=this.props.isPublicationPost,s=`${t?"https://hashnode.com/@":"/@"}${this.props.response.author.username}`;t?window.location.href=s:i.Router.push(s)},this.noop=e=>{e.preventDefault()},this.state={openBadgesTray:!1,extraControlsShown:!1,currentlyVisibleExtraControl:null}}componentDidMount(){this.props.response.isNew&&this.setState({extraControlsShown:!0,currentlyVisibleExtraControl:"share"})}render(){const{response:e,context:t,isPublicationPost:s}=this.props,r=this.props.post||this.props.postStore.post,o=e.author.socialMedia.twitter||e.author.socialMedia.github,a=h.a.link(e.content,{twitter:!0,truncate:45,className:"autolinkedURL",replaceFn:function(e,t){switch(t.getType()){case"twitter":var s=t.getTwitterHandle();return'<a href="https://hashnode.com/@'+s+'" class="user-mention" target="_blank" rel="noopener noreferrer">@'+s+"</a>"}}}),i="question"===r.type?(s?"/":"/post/")+r.slug+"-"+r.cuid+"/answer/"+e.stamp:(s?"/":"/post/")+r.slug+(r.partOfPublication&&r.publication&&"simple"===r.publication.urlPattern?"":"-"+r.cuid)+"#"+e.stamp,n=Object(u.b)(e.dateAdded);return ee("div",{className:"mb-6",itemProp:"question"===r.type?0===this.props.i&&e.totalReactions>5?"acceptedAnswer":"suggestedAnswer":"comment",itemScope:!0,itemType:"question"===r.type?"https://schema.org/Answer":"https://schema.org/Comment"},this.state.editMode?this.props.draftId?ee(Z.a,{draftId:this.props.draftId,fullView:!0,response:e,parentCallback:this.resetEditMode}):ee(K.a,{fullView:!0,response:e,parentCallback:this.resetEditMode}):ee("div",{className:"flex flex-row flex-wrap px-4 py-6 bg-white border rounded-lg md:p-8 md:flex-nowrap dark:bg-brand-grey-900 dark:border-brand-grey-800",id:e.stamp},ee("div",{className:"flex-shrink-0 w-10 h-10 mb-4 mr-2 rounded-full md:mb-0 md:w-12 md:h-12 md:mr-4"},ee(d.a,{width:"160",height:"160",user:e.author,hoverDisabled:s})),ee("div",{className:"w-full min-w-0 md:w-auto md:flex-1"},ee("div",{className:"flex flex-col mb-4",itemProp:"author",itemScope:!0,itemType:"https://schema.org/Person"},ee("div",{className:"flex flex-row items-center justify-between text-brand-grey-900 dark:text-gray-300"},ee("div",{className:"flex flex-row items-center mr-4"},ee("p",{className:"mr-2 text-base font-bold"},ee("a",{itemProp:"sameAs",onClick:e.author.isDeactivated?this.noop:this.loadProfile,href:e.author.isDeactivated?"#":`${s?"https://hashnode.com/@":"/@"}`+e.author.username},ee("span",{itemProp:"name"},e.author.name))),o&&ee("div",{className:"flex flex-row items-center text-brand-grey-700"},e.author.socialMedia.twitter&&ee("a",{href:e.author.socialMedia.twitter,itemProp:"sameAs",target:"_Blank",rel:"noopener nofollow noreferrer",className:"mr-2"},ee(P.a,{className:"w-4 h-4 fill-current"})),e.author.socialMedia.github&&ee("a",{href:e.author.socialMedia.github,itemProp:"sameAs",target:"_Blank",rel:"noopener nofollow noreferrer"},ee(O.a,{className:"w-4 h-4 fill-current"})))),ee("p",{className:"font-normal text-brand-grey-700"},this.props.draftId?n:ee("a",{href:i,title:p()(e.dateAdded).format("MMM D, YYYY HH:mm"),className:"date-time"},n))),e.author.tagline&&ee("p",{className:"text-sm text-brand-grey-700 dark:text-gray-400",itemProp:"description"},e.author.tagline)),ee("meta",{itemProp:"dateCreated datePublished",content:e.dateAdded}),"question"===r.type&&ee("meta",{itemProp:"url",content:i}),ee("div",{itemProp:"text",className:"my-5 prose break-words dark:prose-dark lg:prose-lg",onClick:this.loadPost,dangerouslySetInnerHTML:{__html:"feed"===t?e.responseBrief+(e.responseBrief.length>140?"...":""):Object(c.imageReplacer)(a)}}),"question"===r.type&&ee("meta",{itemProp:"upvoteCount",content:e.totalReactions}),ee(Q,{draftId:this.props.draftId,isPublicationPost:this.props.isPublicationPost,goToPublicationLogin:this.props.goToPublicationLogin,post:r,toggleBadgesTray:this.toggleBadgesTray,openBadgesTray:this.state.openBadgesTray,handleCollapse:this.handleCollapse,handleEdit:this.handleEdit,handleDelete:this.handleDelete,response:e,context:t,showExtraControls:this.showExtraControls,extraControlsShown:this.state.extraControlsShown}))))}})||G)||G},CZoQ:function(e,t){e.exports=function(e,t,s){for(var r=s-1,o=e.length;++r<o;)if(e[r]===t)return r;return-1}},JeLk:function(e,t,s){"use strict";var r,o=s("q1tI"),a=s.n(o),i=s("8cHP"),n=s("jKhH"),p=s("qPyV"),l=s.n(p),h=s("okNM"),c=(s("slGX"),s("VqVs")),d=(s("cD6e"),s("Brk0")),u=a.a.createElement;const m=s("X8aD"),f=new m.Renderer;f.link=function(e,t,s){var r=m.Renderer.prototype.link.call(this,e,t,s);return t&&t.includes("s Profile - Hashnode")&&e&&e.includes("https://hashnode.com")?r.replace("<a","<a class='user-mention' target='_blank' rel='noopener noreferrer'"):0===e.indexOf("#")?r.replace("<a","<a class='post-section-overview'"):r.replace("<a","<a target='_blank' rel='noopener noreferrer' ")},f.tablecell=function(e,t){var s=e.split("&lt;br&gt;-");if(1===s.length)return"<td>"+e+"</td>";0===s[0].indexOf("- ")&&(s[0]=s[0].substring(1));var r="";return s.forEach((function(e){r+="<li>"+e+"</li>"})),"<td><ul>"+r+"</ul></td>"};const b={renderer:f,gfm:!0,tables:!0,sanitize:!0,highlight:function(e,t){const r=s("rkFo");return t?r.getLanguage(t)?r.highlight(t,e,!0).value:r.highlightAuto(e,[]).value:r.highlightAuto(e).value}};let g=Object(h.b)("postStore")(r=Object(h.b)("userStore")(r=Object(h.c)(r=class extends a.a.Component{constructor(e,t){super(e,t),this.initEditorWithContent=()=>{return""},this.hideCommentArea=e=>{e.preventDefault(),this.setState({commentAreaVisible:!1}),this.props.parentCallback&&this.props.parentCallback()},this.showCommentArea=e=>{if(e.preventDefault(),!this.props.userStore.currentUser){const e="?next="+window.location.pathname;return i.Router.pushRoute("/login"+e)}this.setState({commentAreaVisible:!0},()=>{this.initEditorWithContent(),this.editor&&this.editor.focus()})},this.submitResponse=async e=>{if(!this.props.userStore.currentUser){if(this.props.isPublicationPost)return this.props.goToPublicationLogin("comment");const e="?next="+window.location.pathname;return i.Router.pushRoute("/login"+e)}const t=this.props.draftId,s=this.editor.value.trim();if(s){if(this.setState({submitDisabled:!0}),this.props.response){await this.props.postStore.updateDraftResponse(t,this.props.response._id,s);const e=this.props.postStore.draftResponses.slice();for(let t=0;t<e.length;t++)if(e[t]._id===this.props.response._id){e[t].contentMarkdown=s,e[t].content=m(s,b);break}this.props.postStore.draftResponses=e}else await this.props.postStore.submitDraftResponse(t,s);this.setState({submitDisabled:!1}),this.props.parentCallback&&this.props.parentCallback(),this.setState({commentAreaVisible:!1}),this.editor.clearEditor()}},this.handleInput=e=>{this.setState({response:e})},this.state={commentAreaVisible:!!e.response||e.postStore.draftResponses.length<=0}}componentDidMount(){if(this.state.commentAreaVisible){this.initEditorWithContent()&&this.editor&&this.editor.focus()}}render(){const e=this.props.userStore.currentUser,t=this.props.postStore.draftResponses;let s=[];return(t||[]).map((function(e){e.author.isDeactivated||s.push({name:e.author.name,username:e.author.username,photo:e.author.photo})})),s=l()(s,"username"),e&&(s=s.filter((function(t){return t.username!==e.username}))),s=s.slice(0,5),u("div",{id:"comments",className:""},!this.props.response&&t.length>0||!e?u("div",{className:"mx-2 p-4 bg-white rounded-lg border mb-6 flex flex-row flex-wrap justify-between items-center dark:bg-transparent dark:border-brand-grey-800"},u("div",{className:"flex flex-row items-center dark:text-gray-200"},t.length>0?u("h3",{className:"font-bold mr-4"},"Comments (",t.length||0,")"):u("h3",null,"No Comments Yet")),u("div",{className:"w-full md:w-auto flex flex-row items-start mt-3 md:mt-0"},u("a",{href:"#",onClick:this.showCommentArea,className:"button-primary flex flex-row items-center"},u(d.a,{className:"w-5 h-5 fill-current mr-2"}),u("span",null,"Add a comment")))):null,this.state.commentAreaVisible&&e&&u("div",{className:"mx-2 px-4 md:px-8 py-6 bg-white border rounded-lg mb-6 dark:bg-brand-grey-900 dark:border-brand-grey-800"},u("div",{className:"dark:text-gray-300"},u("div",{className:"pb-4"},u("div",{className:"flex flex-row items-center"},u("div",{className:"w-10 h-10 mr-2 rounded-full overflow-hidden"},u(c.a,{className:"comment-author-photo",user:e,hoverDisabled:this.props.isPublicationPost})),u("a",{className:"font-semibold text-lg text-brand-grey-800",href:`/@${e.username}`},e.name))),u(n.a,{getRef:e=>{this.editor=e},name:"editor",onChangeHandler:this.handleInput,onSubmitHandler:this.submitResponse,initialValue:this.props.response?this.props.response.contentMarkdown:"",placeholder:"Start typing...",defaultMentionSuggestions:s}),u("div",{className:"flex flex-row items-center justify-end border-t dark:border-brand-grey-800 pt-4"},t.length>0&&u("button",{onClick:this.hideCommentArea,className:"button-transparent mr-5"},"Cancel"),u("button",{onClick:this.submitResponse,disabled:this.state.submitDisabled,className:"button-primary "+(this.state.submitDisabled?"opacity-50":"")},this.props.response?"Save":"Submit")))))}})||r)||r)||r;t.a=g},KwMD:function(e,t){e.exports=function(e,t,s,r){for(var o=e.length,a=s+(r?1:-1);r?a--:++a<o;)if(t(e[a],a,e))return a;return-1}},LGYb:function(e,t,s){var r=s("1hJj"),o=s("jbM+"),a=s("Xt/L"),i=s("xYSL"),n=s("dQpi"),p=s("rEGp"),l=200;e.exports=function(e,t,s){var h=-1,c=o,d=e.length,u=!0,m=[],f=m;if(s)u=!1,c=a;else if(d>=l){var b=t?null:n(e);if(b)return p(b);u=!1,c=i,f=new r}else f=t?[]:m;e:for(;++h<d;){var g=e[h],w=t?t(g):g;if(g=s||0!==g?g:0,u&&w===w){for(var v=f.length;v--;)if(f[v]===w)continue e;t&&f.push(w),m.push(g)}else c(f,w,s)||(f!==m&&f.push(w),m.push(g))}return m}},PzbU:function(e,t,s){"use strict";s.d(t,"a",(function(){return i}));var r=s("q1tI"),o=s.n(r),a=o.a.createElement;class i extends o.a.Component{render(){return a("svg",{className:this.props.className,viewBox:"0 0 576 512"},a("path",{d:"M11.093 251.65l175.998 184C211.81 461.494 256 444.239 256 408v-87.84c154.425 1.812 219.063 16.728 181.19 151.091-8.341 29.518 25.447 52.232 49.68 34.51C520.16 481.421 576 426.17 576 331.19c0-171.087-154.548-201.035-320-203.02V40.016c0-36.27-44.216-53.466-68.91-27.65L11.093 196.35c-14.791 15.47-14.791 39.83 0 55.3zm23.127-33.18l176-184C215.149 29.31 224 32.738 224 40v120c157.114 0 320 11.18 320 171.19 0 74.4-40 122.17-76.02 148.51C519.313 297.707 395.396 288 224 288v120c0 7.26-8.847 10.69-13.78 5.53l-176-184a7.978 7.978 0 010-11.06z"}))}}},"R/W3":function(e,t,s){var r=s("KwMD"),o=s("2ajD"),a=s("CZoQ");e.exports=function(e,t,s){return t===t?a(e,t,s):r(e,o,s)}},XOv7:function(e,t,s){"use strict";s.d(t,"a",(function(){return i}));var r=s("q1tI"),o=s.n(r),a=o.a.createElement;class i extends o.a.Component{render(){return a("svg",{className:this.props.className,viewBox:"0 0 512 512"},a("path",{d:"M492 8h-10c-6.627 0-12 5.373-12 12v110.627C426.929 57.261 347.224 8 256 8 123.228 8 14.824 112.338 8.31 243.493 7.971 250.311 13.475 256 20.301 256h10.016c6.353 0 11.646-4.949 11.977-11.293C48.157 132.216 141.097 42 256 42c82.862 0 154.737 47.077 190.289 116H332c-6.627 0-12 5.373-12 12v10c0 6.627 5.373 12 12 12h160c6.627 0 12-5.373 12-12V20c0-6.627-5.373-12-12-12zm-.301 248h-10.015c-6.352 0-11.647 4.949-11.977 11.293C463.841 380.158 370.546 470 256 470c-82.608 0-154.672-46.952-190.299-116H180c6.627 0 12-5.373 12-12v-10c0-6.627-5.373-12-12-12H20c-6.627 0-12 5.373-12 12v160c0 6.627 5.373 12 12 12h10c6.627 0 12-5.373 12-12V381.373C85.071 454.739 164.777 504 256 504c132.773 0 241.176-104.338 247.69-235.493.339-6.818-5.165-12.507-11.991-12.507z"}))}}},"Xt/L":function(e,t){e.exports=function(e,t,s){for(var r=-1,o=null==e?0:e.length;++r<o;)if(s(t,e[r]))return!0;return!1}},cD6e:function(e,t,s){"use strict";var r=s("q1tI"),o=s.n(r),a=s("B4tZ"),i=o.a.createElement;class n extends r.Component{constructor(e){super(e),this.showDropdown=e=>{e&&e.preventDefault(),this.setState({isOpen:!0}),document.addEventListener("click",this.hideDropdown),document.addEventListener("touchend",this.hideDropdown)},this.hideDropdown=e=>{this.sortDropdown&&!this.sortDropdown.contains(e.target)&&(e.preventDefault(),this.setState({isOpen:!1}),document.removeEventListener("click",this.hideDropdown),document.removeEventListener("touchend",this.hideDropdown))},this.forceCloseDropdown=()=>{this.setState({isOpen:!1}),document.removeEventListener("click",this.hideDropdown),document.removeEventListener("touchend",this.hideDropdown)},this.handleSelect=(e,t,s)=>{e.preventDefault(),this.setState({activeElementIndex:t}),this.forceCloseDropdown(),this.props.onElementSelect(t,s)},this.state={isOpen:e.defaultOpen||!1,activeElementIndex:0,elements:e.elements||[]}}render(){const e=this.state.elements.map((e,t)=>i("a",{href:"#",key:t,onClick:s=>this.handleSelect(s,t,e.key),className:"dropdown-menu dark:text-white dark:hover:bg-brand-dark-grey-800 dark:hover:text-white "+(this.state.activeElementIndex===t?"active":"")},e.name));return i("div",{className:"relative "+this.props.className},i("a",{href:"#",onClick:this.showDropdown,className:"button-transparent block flex flex-row items-center"},i("span",null,this.state.elements[this.state.activeElementIndex].name),i(a.a,{className:"w-6 h-6 ml-2 fill-current"})),this.state.isOpen?i("div",{className:"dropdown-style absolute top-100 left-0 mt-2 w-40 dark:bg-brand-dark-grey-900 dark:border-brand-grey-800",ref:e=>{this.sortDropdown=e}},e):null)}}t.a=n},dQpi:function(e,t,s){var r=s("yGk4"),o=s("vN+2"),a=s("rEGp"),i=r&&1/a(new r([,-0]))[1]==1/0?function(e){return new r(e)}:o;e.exports=i},"jbM+":function(e,t,s){var r=s("R/W3");e.exports=function(e,t){return!!(null==e?0:e.length)&&r(e,t,0)>-1}},qPyV:function(e,t,s){var r=s("ut/Y"),o=s("LGYb");e.exports=function(e,t){return e&&e.length?o(e,r(t,2)):[]}},u89N:function(e,t,s){"use strict";s.d(t,"a",(function(){return h}));var r,o=s("q1tI"),a=s.n(o),i=s("8cHP"),n=s("okNM"),p=s("w87v"),l=a.a.createElement;let h=Object(n.b)("postStore")(r=Object(n.b)("userStore")(r=class extends a.a.Component{constructor(e,t){super(e,t),this.submit=async e=>{if(e.preventDefault(),!this.props.userStore.currentUser){if(this.props.isPublicationPost)return this.props.goToPublicationLogin();const e="?next="+window.location.pathname;return i.Router.pushRoute("/login"+e)}"user"===this.props.context?await this.props.userStore.reportUser({userId:this.props.userStore.profile._id,reason:this.state.reason}):"reply"===this.props.context?await this.props.postStore.reportPost({postId:this.props.post&&this.props.post._id,responseId:this.props.response&&this.props.response._id,replyId:this.props.reply._id,reason:this.state.reason,type:"reply"}):await this.props.postStore.reportPost({postId:this.props.post&&this.props.post._id,responseId:this.props.response&&this.props.response._id,reason:this.state.reason,type:"post"}),this.setState({showThanksMessage:!0})},this.describeReason=e=>{e.preventDefault(),this.setState({reason:e.currentTarget.value,otherTextAreaHidden:!1})},this.onReasonSelect=e=>{"Others"===e.currentTarget.value?this.setState({reason:"others",otherTextAreaHidden:!1}):(this.setState({otherTextAreaHidden:!0,reason:e.currentTarget.value}),this.textarea&&(this.textarea.value=""))},this.loadReasons=()=>{return this.reasons.map(e=>l("div",{className:"mb-5 text-lg leading-snug font-semibold text-brand-grey-700 dark:text-brand-grey-300",key:e.key},l("label",{className:"flex flex-row items-center",htmlFor:e.key},l("input",{className:"mr-2 h-5 w-5",name:"report-option",type:"radio",value:e.key,onChange:this.onReasonSelect,id:e.key}),l("span",null,e.val))))},this.state={otherTextAreaHidden:!0,reason:"Spam",showThanksMessage:!1},this.reasons=[],"user"===this.props.context?this.reasons=[{key:"Duplicate",val:"A duplicate user"},{key:"Fake",val:"A fake account"},{key:"Offender",val:"Profile info, images, posts and/or reponses include abusive/inapropriate/hateful content"},{key:"Spam",val:"Spam"}]:this.reasons=[{key:"Spam",val:"It's spam"},{key:"Abusive",val:"It's abusive"},{key:"Not-interested",val:"I am not interested"},{key:"Not-related",val:"This should not be on Hashnode"}]}render(){return l("div",{className:"p-4 border border-yellow-500 rounded-lg bg-white dark:bg-brand-dark-grey-900 relative"},l("button",{className:"absolute top-0 right-0 m-4 button-transparent",onClick:this.props.hideExtraOptions},l(p.a,{className:"w-5 h-5 fill-current"})),this.state.showThanksMessage?l("p",{className:"text-green-500 font-bold"},"Thank you for reporting this ",this.props.isResponse?" response":this.props.context||"post",". Our team has been notified."):l("div",null,l("h3",{className:"text-xl leading-snug tracking-tight font-bold text-brand-black dark:text-white mb-5"},"Help us understand the problem. What is going on with this ",this.props.isResponse?" response?":this.props.context||"post","?"),l("form",{className:"text-gray-800 dark:text-gray-200"},this.loadReasons(),l("div",{className:"mb-5 text-lg leading-snug font-semibold text-brand-grey-700 dark:text-brand-grey-300"},l("label",{className:"flex flex-row items-center",htmlFor:"check-5"},l("input",{className:"mr-2 h-5 w-5",name:"report-option",type:"radio",value:"Others",onChange:this.onReasonSelect,id:"check-5"}),l("span",null,"Other"))),l("div",{className:"mb-2"},l("textarea",{disabled:this.state.otherTextAreaHidden,className:"input-text "+(this.state.otherTextAreaHidden?"bg-gray-100 dark:bg-gray-700":"bg-white dark:bg-brand-grey-900"),id:"other-textfield",rows:"3",placeholder:"Describe your reason, if other. ",onChange:this.describeReason,ref:e=>{this.textarea=e}})),l("button",{className:"button-primary big",onClick:this.submit},"Submit"))))}})||r)||r},"vN+2":function(e,t){e.exports=function(){}}}]);